(self.webpackChunkjupyter_msal_widget=self.webpackChunkjupyter_msal_widget||[]).push([[367],{554:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthModule=void 0;const i=n(242),o={auth:{clientId:""},cache:{cacheLocation:"sessionStorage",storeAuthStateInCookie:!1},system:{loggerOptions:{loggerCallback:(e,t,n)=>{if(!n)switch(e){case i.LogLevel.Error:return void console.error(t);case i.LogLevel.Info:return void console.info(t);case i.LogLevel.Verbose:return void console.debug(t);case i.LogLevel.Warning:return void console.warn(t)}}}}};t.AuthModule=class{constructor(e){const t=o;t.auth.clientId=e.clientId,t.auth.authority=e.authority,this.myMSALObj=new i.PublicClientApplication(t),this.account=null,this.loginRequest={scopes:[]}}getAccount(){const e=this.myMSALObj.getAllAccounts();return null===e?(console.log("No accounts detected"),null):e.length>1?(console.log("Multiple accounts detected, need to add choose account code."),e[0]):1===e.length?e[0]:null}loadAuthModule(){this.myMSALObj.handleRedirectPromise().then((e=>{})).catch(console.error)}login(e){this.myMSALObj.loginPopup(this.loginRequest).then((t=>(e&&e(t),t))).catch(console.error)}logout(e){let t;this.account&&(t=this.account);const n={account:t};this.myMSALObj.logoutPopup(n).then((t=>(e&&e(t),t)))}}},385:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthModule=void 0;var i=n(554);Object.defineProperty(t,"AuthModule",{enumerable:!0,get:function(){return i.AuthModule}})},258:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.labels=void 0,t.labels={logoff:"Logout",login:"Login"}},657:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MODULE_NAME=t.MODULE_VERSION=void 0;const i=n(147);t.MODULE_VERSION=i.version,t.MODULE_NAME=i.name},367:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{l(i.next(e))}catch(e){r(e)}}function a(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MsalWidgetView=t.MsalWidgetModel=void 0;const r=o(n(439)),s=n(476),a=n(565),l=n(657);n(204);const c=n(385),u=n(258);class d extends a.DOMWidgetModel{defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_name:d.model_name,_model_module:d.model_module,_model_module_version:d.model_module_version,_view_name:d.view_name,_view_module:d.view_module,_view_module_version:d.view_module_version,content:void 0,signed_in:!1})}}t.MsalWidgetModel=d,d.serializers=Object.assign(Object.assign({},a.DOMWidgetModel.serializers),{content:{deserialize:a.unpack_models}}),d.model_name="MsalWidgetModel",d.model_module=l.MODULE_NAME,d.model_module_version=l.MODULE_VERSION,d.view_name="MsalWidgetView",d.view_module=l.MODULE_NAME,d.view_module_version=l.MODULE_VERSION;class h extends a.DOMWidgetView{constructor(e){super(e),this.createAuthModule=()=>{const e=this.model.get("client_id"),t=this.model.get("authority_url");this._authModule=new c.AuthModule({clientId:e,authority:t})},this.getSignedIn=()=>{const e=this._authModule.getAccount()||{};return[!r.default.isEmpty(e),e]},this.setContent=()=>i(this,void 0,void 0,(function*(){this.content||(yield s.Promise.props({content:this.create_child_view(this.model.get("content"))}).then((e=>{this.content=e.content})))})),this.modifyStyle=()=>{document.documentElement.style.setProperty("--button-main-color",this.model.get("button_main_color")),b(this._button,this.model.get("button_style"))},this.onBackendChanges=()=>i(this,void 0,void 0,(function*(){yield this.handleFrontendChanges()})),this.handleBackendChanges=()=>{const[e,t]=this.getSignedIn();this.model.set({account:t,signed_in:e}),this.touch()},this.buildFrontend=()=>{this._button=document.createElement("button"),this._button.classList.add("button"),this._button.onclick=this.onClick,this.el.appendChild(this._button),this.el.classList.add("widget-container"),this.modifyStyle()},this.handleFrontendChanges=()=>i(this,void 0,void 0,(function*(){const[e]=this.getSignedIn();e?(this._button.innerHTML=u.labels.logoff,this.displayLogout?p(this.el,this._button,!0):p(this.el,this._button,!1),p(this.el,this.content.el,!0)):(this._button.innerHTML=u.labels.login,p(this.el,this.content.el,!1))})),this.onClick=()=>{const[e]=this.getSignedIn();e&&this._authModule.logout(this.handleBackendChanges)||this._authModule.login(this.handleBackendChanges)},this.createAuthModule(),this.handleBackendChanges()}render(){return i(this,void 0,void 0,(function*(){this.displayLogout=this.model.get("display_logout"),yield this.setContent(),this.buildFrontend(),this.handleFrontendChanges(),this.model.on("change:signed_in",this.onBackendChanges,this)}))}}t.MsalWidgetView=h;const p=(e,t,n)=>{const i=e.contains(t);i&&!n&&e.removeChild(t),!i&&n&&e.appendChild(t)},b=(e,t)=>{if(e)for(const n in t)e.style[n]=t[n]}},889:(e,t,n)=>{(t=n(645)(!1)).push([e.id,":root {\r\n  --button-main-color: 0, 117, 190;\r\n}\r\n\r\n.widget-container {\r\n  padding: 8px 16px;\r\n}\r\n\r\n.button {\r\n  display: none;\r\n}\r\n\r\n/* CSS */\r\n.button {\r\n  align-items: center;\r\n  background-clip: padding-box;\r\n  background-color: rgba(var(--button-main-color), 0.9);\r\n  border: 1px solid transparent;\r\n  border-radius: 0.25rem;\r\n  box-shadow: rgba(0, 0, 0, 0.02) 0 1px 3px 0;\r\n  box-sizing: border-box;\r\n  color: #fff;\r\n  cursor: pointer;\r\n  display: inline-flex;\r\n  font-family: system-ui, -apple-system, system-ui, 'Helvetica Neue', Helvetica,\r\n    Arial, sans-serif;\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  justify-content: center;\r\n  line-height: 1.25;\r\n  margin: 0;\r\n  min-height: 3rem;\r\n  padding: calc(0.875rem - 1px) calc(1.5rem - 1px);\r\n  position: relative;\r\n  text-decoration: none;\r\n  transition: all 250ms;\r\n  user-select: none;\r\n  -webkit-user-select: none;\r\n  touch-action: manipulation;\r\n  vertical-align: baseline;\r\n  width: auto;\r\n}\r\n\r\n.button:hover,\r\n.button:focus {\r\n  background-color: rgba(var(--button-main-color), 0.75);\r\n  box-shadow: rgba(0, 0, 0, 0.1) 0 4px 12px;\r\n}\r\n\r\n.button:active {\r\n  background-color: rgba(var(--button-main-color), 1);\r\n  box-shadow: rgba(0, 0, 0, 0.06) 0 2px 4px;\r\n  transform: translateY(0);\r\n}\r\n",""]),e.exports=t},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,i,o,r=e[1]||"",s=e[3];if(!s)return r;if(t&&"function"==typeof btoa){var a=(n=s,i=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(i),"/*# ".concat(o," */")),l=s.sources.map((function(e){return"/*# sourceURL=".concat(s.sourceRoot||"").concat(e," */")}));return[r].concat(l).concat([a]).join("\n")}return[r].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,i){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(i)for(var r=0;r<this.length;r++){var s=this[r][0];null!=s&&(o[s]=!0)}for(var a=0;a<e.length;a++){var l=[].concat(e[a]);i&&o[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},204:(e,t,n)=>{var i=n(379),o=n(889);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,""]]);i(o,{insert:"head",singleton:!1}),e.exports=o.locals||{}},379:(e,t,n)=>{"use strict";var i,o=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),r=[];function s(e){for(var t=-1,n=0;n<r.length;n++)if(r[n].identifier===e){t=n;break}return t}function a(e,t){for(var n={},i=[],o=0;o<e.length;o++){var a=e[o],l=t.base?a[0]+t.base:a[0],c=n[l]||0,u="".concat(l," ").concat(c);n[l]=c+1;var d=s(u),h={css:a[1],media:a[2],sourceMap:a[3]};-1!==d?(r[d].references++,r[d].updater(h)):r.push({identifier:u,updater:g(h,t),references:1}),i.push(u)}return i}function l(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce){var r=n.nc;r&&(i.nonce=r)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"==typeof e.insert)e.insert(t);else{var s=o(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(t)}return t}var c,u=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function d(e,t,n,i){var o=n?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=u(t,o);else{var r=document.createTextNode(o),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(r,s[t]):e.appendChild(r)}}function h(e,t,n){var i=n.css,o=n.media,r=n.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var p=null,b=0;function g(e,t){var n,i,o;if(t.singleton){var r=b++;n=p||(p=l(t)),i=d.bind(null,n,r,!1),o=d.bind(null,n,r,!0)}else n=l(t),i=h.bind(null,n,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i));var n=a(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<n.length;i++){var o=s(n[i]);r[o].references--}for(var l=a(e,t),c=0;c<n.length;c++){var u=s(n[c]);0===r[u].references&&(r[u].updater(),r.splice(u,1))}n=l}}}},147:e=>{"use strict";e.exports=JSON.parse('{"name":"jupyter_msal_widget","version":"0.1.2","description":"A Custom Jupyter Widget Library","keywords":["jupyter","jupyterlab","jupyterlab-extension","widgets"],"files":["lib/**/*.js","dist/*.js","css/*.css"],"homepage":"https://github.com/jupyter_msal_widget","bugs":{"url":"https://github.com/jupyter_msal_widget/issues"},"license":"BSD-3-Clause","author":{"name":"Felipe Oucharski","email":"felipe.oucharski@gmail.com"},"main":"lib/index.js","types":"./lib/index.d.ts","repository":{"type":"git","url":"https://github.com/jupyter_msal_widget"},"scripts":{"build":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension:dev","build:prod":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension","build:labextension":"jupyter labextension build .","build:labextension:dev":"jupyter labextension build --development True .","build:lib":"tsc","build:nbextension":"webpack","clean":"yarn run clean:lib && yarn run clean:nbextension && yarn run clean:labextension","clean:lib":"rimraf lib","clean:labextension":"rimraf jupyter_msal_widget/labextension","clean:nbextension":"rimraf jupyter_msal_widget/nbextension/static/index.js","lint":"eslint . --ext .ts,.tsx --fix","lint:check":"eslint . --ext .ts,.tsx","prepack":"yarn run build:lib","test":"jest","watch":"npm-run-all -p watch:*","watch:lib":"tsc -w","watch:nbextension":"webpack --watch --mode=development","watch:labextension":"jupyter labextension watch ."},"dependencies":{"@azure/msal-browser":"^2.22.1","@jupyter-widgets/base":"^1.1.10 || ^2.0.0 || ^3.0.0 || ^4.0.0","bluebird":"^3.7.2","jquery":"^3.6.0","lodash":"^4.17.21"},"devDependencies":{"@babel/core":"^7.5.0","@babel/preset-env":"^7.5.0","@jupyterlab/builder":"^3.0.0","@phosphor/application":"^1.6.0","@phosphor/widgets":"^1.6.0","@types/bluebird":"^3.5.36","@types/jest":"^26.0.0","@types/webpack-env":"^1.13.6","@typescript-eslint/eslint-plugin":"^3.6.0","@typescript-eslint/parser":"^3.6.0","acorn":"^7.2.0","css-loader":"^3.2.0","eslint":"^7.4.0","eslint-config-prettier":"^6.11.0","eslint-plugin-prettier":"^3.1.4","fs-extra":"^7.0.0","identity-obj-proxy":"^3.0.0","jest":"^26.0.0","mkdirp":"^0.5.1","npm-run-all":"^4.1.3","prettier":"^2.0.5","rimraf":"^2.6.2","source-map-loader":"^1.1.3","style-loader":"^1.0.0","ts-jest":"^26.0.0","ts-loader":"^8.0.0","typescript":"~4.1.3","webpack":"^5.61.0","webpack-cli":"^4.0.0"},"jupyterlab":{"extension":"lib/plugin","outputDir":"jupyter_msal_widget/labextension/","sharedPackages":{"@jupyter-widgets/base":{"bundled":false,"singleton":true}}}}')}}]);