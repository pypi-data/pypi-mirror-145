FROM python:3.9-slim-buster

RUN apt-get update && \
  apt-get upgrade -y && \
  apt-get install -y git

WORKDIR /
COPY ./ ./

RUN curl -sSL https://raw.githubusercontent.com/python-poetry/poetry/master/get-poetry.py | python -
RUN pip3 install poetry
RUN poetry install

EXPOSE 8080
EXPOSE ${port}

CMD ["poetry", "run", "flask", "run", "--host=0.0.0.0", "--port=8080"]